import { GetServerSideProps } from "next";
import { MDXRemote, MDXRemoteSerializeResult } from "next-mdx-remote";
import { serialize } from "next-mdx-remote/serialize";
import { getContentById } from "../lib/sidebar"; // API function to fetch content by ID

type ContentProps = {
  mdxSource: MDXRemoteSerializeResult;
  content: {
    Title: string;
    Content: string;
  };
};

export const getServerSideProps: GetServerSideProps = async (context) => {
  const { id } = context.params as { id: string };
  const content = await getContentById(id);

  console.log(content);

  const mdxSource = await serialize(content.Content);

  return {
    props: {
      mdxSource,
      content,
    },
  };
};

export default function ContentPage({ mdxSource, content }: ContentProps) {
  return (
    <div>
      <h1>{content.Title}</h1>
      <MDXRemote {...mdxSource} />
      <p>success</p>
      <p>{content.Content}</p>
    </div>
  );
}
